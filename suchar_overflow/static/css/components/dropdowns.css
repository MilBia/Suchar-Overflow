/* Custom Dropdown Component */

.custom-dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-trigger {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 1.25rem;
    font-size: 0.95rem;
    font-weight: 500;
    color: var(--text-main);
    background-color: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    appearance: none;
    -webkit-appearance: none;
    width: 100%;
    text-align: left;
    min-width: 160px;
    /* Minimum width for sort menu consistency */
    justify-content: space-between;
}

.dropdown-trigger:hover {
    border-color: var(--text-muted);
    background-color: var(--bg-surface-glass);
}

.dropdown-trigger:focus,
.custom-dropdown.show .dropdown-trigger {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px hsla(var(--hue-primary), 80%, 60%, 0.15);
    outline: none;
}

.dropdown-menu {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    /* Align right since usually used in right-aligned toolbars */
    min-width: 200px;
    background: var(--bg-surface-glass);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    z-index: 1000;

    /* Animation State: Hidden */
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px) scale(0.98);
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-origin: top right;

    padding: 0.5rem;
    list-style: none;
    display: flex;
    /* Flex to allow potential layout control */
    flex-direction: column;
}

/* Animation State: Visible */
.custom-dropdown.show .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
}

/* Dropdown Items */
.dropdown-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.6rem 1rem;
    font-size: 0.95rem;
    color: var(--text-main);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background-color 0.15s ease;
    user-select: none;
    text-decoration: none;
}

.dropdown-item:hover {
    background-color: hsla(var(--hue-primary), 50%, 50%, 0.08);
    /* Subtle primary tint */
    color: var(--color-primary);
}

.dropdown-item.selected {
    font-weight: 600;
    color: var(--color-primary);
    background-color: hsla(var(--hue-primary), 50%, 50%, 0.05);
}

.dropdown-item .check-icon {
    color: var(--color-primary);
    opacity: 0;
    transform: scale(0.5);
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.dropdown-item.selected .check-icon {
    opacity: 1;
    transform: scale(1);
}

/* Arrow rotation */
.dropdown-trigger .chevron-icon {
    transition: transform 0.3s ease;
    color: var(--text-muted);
}

.custom-dropdown.show .dropdown-trigger .chevron-icon {
    transform: rotate(180deg);
}
