{% extends "base.html" %}

{% block title %}
  Suchary
{% endblock title %}
{% block content %}
  <div class="container py-4">
    <div class="row mb-4 align-items-center">
      <div class="col">
        <h1 class="display-5 fw-bold text-primary">Suchary</h1>
        <p class="text-muted lead">Najsuchsze żarty w internecie.</p>
      </div>
      <div class="col-auto">
        <a href="{% url 'suchary:add' %}"
           class="btn btn-primary btn-lg shadow-sm">
          <svg xmlns="http://www.w3.org/2000/svg"
               width="20"
               height="20"
               fill="currentColor"
               class="bi bi-plus-lg me-1"
               viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2" />
          </svg>
          Dodaj Suchara
        </a>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        {% for suchar in suchary %}
          <div class="card suchar-card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div class="d-flex align-items-center">
                  <div class="avatar bg-light rounded-circle p-2 me-2 text-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="24"
                         height="24"
                         fill="currentColor"
                         class="bi bi-person-fill"
                         viewBox="0 0 16 16">
                      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />
                    </svg>
                  </div>
                  <div>
                    <h6 class="mb-0 fw-bold">{{ suchar.author.username }}</h6>
                    <small class="suchar-meta">{{ suchar.created_at|date:"d M Y, H:i" }}</small>
                  </div>
                </div>
              </div>
              <p class="suchar-text mb-4">{{ suchar.text|linebreaksbr }}</p>
              <div class="d-flex align-items-center justify-content-between border-top pt-3">
                <div class="d-flex align-items-center">
                  <span class="vote-score me-3">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         width="20"
                         height="20"
                         fill="currentColor"
                         class="bi bi-star-fill text-warning mb-1"
                         viewBox="0 0 16 16">
                      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                    </svg>
                    {{ suchar.score|default_if_none:0 }}
                  </span>
                </div>
                {% if user.is_authenticated %}
                  <form method="post"
                        action="{% url 'suchary:vote' suchar.pk %}"
                        class="d-flex align-items-center">
                    {% csrf_token %}
                    <button type="submit"
                            name="value"
                            value="1"
                            class="btn btn-vote me-2"
                            title="Śmieszne (Głosuj w górę)">
                      <svg xmlns="http://www.w3.org/2000/svg"
                           width="20"
                           height="20"
                           fill="currentColor"
                           class="bi bi-emoji-laughing"
                           viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                        <path d="M12.331 9.5a1 1 0 0 1 0 1A4.998 4.998 0 0 1 8 13a4.998 4.998 0 0 1-4.33-2.5A1 1 0 0 1 4.535 9h6.93a1 1 0 0 1 .866.5M7 6.5c0 .828-.448 0-1 0s-1 .828-1 0S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 0-1 0s-1 .828-1 0S9.448 5 10 5s1 .672 1 1.5" />
                      </svg>
                    </button>
                    <button type="submit"
                            name="value"
                            value="-1"
                            class="btn btn-vote"
                            title="Suchar (Głosuj w dół)">
                      <svg xmlns="http://www.w3.org/2000/svg"
                           width="20"
                           height="20"
                           fill="currentColor"
                           class="bi bi-emoji-neutral"
                           viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                        <path d="M4 10.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5m3-4C7 5.672 6.552 5 6 5s-1 .672-1 1.5S5.448 8 6 8s1-.672 1-1.5m4 0c0-.828-.448-1.5-1-1.5s-1 .672-1 1.5S9.448 8 10 8s1-.672 1-1.5" />
                      </svg>
                    </button>
                  </form>
                {% endif %}
              </div>
            </div>
          </div>
        {% empty %}
          <div class="text-center py-5">
            <div class="mb-3 text-muted">
              <svg xmlns="http://www.w3.org/2000/svg"
                   width="48"
                   height="48"
                   fill="currentColor"
                   class="bi bi-wind"
                   viewBox="0 0 16 16">
                <path d="M12.5 2A2.5 2.5 0 0 0 10 4.5a.5.5 0 0 1-1 0A3.5 3.5 0 1 1 12.5 8H.5a.5.5 0 0 1 0-1h12a2.5 2.5 0 0 0 0-5m-7 1a1 1 0 0 0-1 1 .5.5 0 0 1-1 0 2 2 0 1 1 2 2h-5a.5.5 0 0 1 0-1h5a1 1 0 0 0 0-2" />
              </svg>
            </div>
            <h3>Ale tu sucho...</h3>
            <p class="text-muted">Bądź bohaterem, którego potrzebujemy i dodaj pierwszego suchara.</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock content %}
